<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>記餐系统</title>
    
    <style>
        /* ... 你的 CSS 样式 ... */
    
        .floating-button {
            position: fixed;
            top: 290px;
            right: 20px;
            background-color: #f00;
            color: #fff;
            padding: 25px;
            border: none;
            cursor: pointer;
            border-radius: 80%;
        }

        .category {
            margin: 30px;
            display: none; /* 初始隐藏所有分类 */
            flex-wrap: wrap;
        }

        .menu-item {
            margin: 10px;
            padding: 10px;
            border: 1px solid #333;
            background-color: #f5f5f5;
            cursor: pointer;
        }

        .menu-item:hover {
            background-color: #ddd;
        }

        /* 导航栏样式 */
        .navbar {
            display: flex;
            justify-content: space-around;
            background-color: #333;
            color: #fff;
            padding: 10px 0;
        }

        .navbar a {
            color: #fff;
            text-decoration: none;
            padding: 5px 10px;
        }

        /* 模态框样式 */
        .modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #ece06c;
            padding: 10px;
            box-shadow: 0px 50px 10px rgba(0, 0, 10, 0.5);
            z-index: 1000;
            overflow: hidden;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .floating-button {
            font-size: 15px; /* 调整字体大小为20px，根据需要修改 */
    /* 其他样式 */

        }
        
        /* 将选项按钮放成两列 */
#optionsPopup button {
    width: 60px;
    height: 36px;
    font-size: 20px;
    margin: 5px; /* 添加间距 */
    float: left; /* 左浮动，使其并排显示 */
}

/* 清除浮动以避免影响其他元素 */
#optionsPopup::after {
    content: '';
    display: table;
    clear: both;
}
    </style>
</head>
<script src="/socket.io/socket.io.js"></script>

<script>
    // 连接到WebSocket服务器
    const socket = io();

    // 监听服务器发送的更新消息
    socket.on('update', (data) => {
        // 在这里更新待做清单，例如在页面上显示点餐信息
        console.log('Received update:', data);
    });

    // 当用户点餐时，发送消息到服务器
    document.getElementById('order-button').addEventListener('click', () => {
        const orderData = { /* 这里放置点餐信息 */ };
        socket.emit('order', orderData);
    });
</script>

<body>
    <h1>記餐系统</h1>
    <!-- 在index1.html中的合适位置添加登出按钮 -->
    

    <button id="logout-button">登出</button>

    <!-- 添加按钮用于添加管理员 -->
    <button id="add-admin-button">新增管理员</button>

    <script>
        // 获取登出按钮元素
        const logoutButton = document.getElementById('logout-button');
        const addAdminButton = document.getElementById('add-admin-button');

        // 监听登出按钮的点击事件
        logoutButton.addEventListener('click', function () {
            // 在这里执行登出操作，例如清除用户会话或重置登录状态

            // 完成登出操作后，将用户重定向到 index.html
            window.location.href = 'index.html';
        });

        // 监听新增管理员按钮的点击事件
        addAdminButton.addEventListener('click', function () {
            // 在这里检查当前用户是否为 root 帐户
            // 如果是 root 帐户，将用户重定向到 add_admin.html 页面
            // 否则，显示权限不足的提示
            // 请根据您的逻辑进行相应的处理
            const isRootUser = true; // 假设当前用户是 root 帐户，您需要替换为实际的逻辑

            if (isRootUser) {
                window.location.href = 'add_admin.html';
            } else {
                alert('权限不足，只有 root 帐户可以执行此操作。');
            }
        });
    </script>

    <!-- 导航栏 -->
    <div class="navbar">
        <a href="#" onclick="showCategory('吐司')">吐司</a>
        <a href="#" onclick="showCategory('漢堡')">漢堡</a>
        <a href="#" onclick="showCategory('蛋餅')">蛋餅</a>
        <a href="#" onclick="showCategory('麵類')">麵類</a>
        <a href="#" onclick="showCategory('捲餅')">捲餅</a>
        <a href="#" onclick="showCategory('炸物')">炸物</a>
        <a href="#" onclick="showCategory('法國吐司')">法吐</a>
        <a href="#" onclick="showCategory('日式穀堡')">穀堡</a>
        <a href="#" onclick="showCategory('起酥堡')">起酥</a>
        <!-- 在这里添加更多分类的链接 -->
    </div>

    <!-- 吐司分类 -->
    <div class="category" id="吐司">
        <div class="menu-item" onclick="showOptions('假吐')">假吐</div>
        <div class="menu-item" onclick="showOptions('烤吐')">烤吐</div>
        <div class="menu-item" onclick="showOptions('起吐')">起吐</div>
        <div class="menu-item" onclick="showOptions('鮪吐')">鮪吐</div>
        <div class="menu-item" onclick="showOptions('火吐')">火吐</div>
        <div class="menu-item" onclick="showOptions('培吐')">培吐</div>
        <div class="menu-item" onclick="showOptions('培吐')">培吐</div>
        <div class="menu-item" onclick="showOptions('香雞吐')">香雞吐</div>
        <div class="menu-item" onclick="showOptions('總吐')">總吐</div>
        
        <!-- 在这里添加更多吐司的菜单项 -->
    </div>
    <div class="category" id="漢堡">
        <div class="menu-item" onclick="showOptions('總堡')">總堡</div>
    <div class="menu-item" onclick="showOptions('烤堡')">烤堡</div>
    <div class="menu-item" onclick="showOptions('牛堡')">牛堡</div>
    <div class="menu-item" onclick="showOptions('豬堡')">豬堡</div>
    <div class="menu-item" onclick="showOptions('玉堡')">玉堡</div>
    <div class="menu-item" onclick="showOptions('辣腿堡')">辣腿堡</div>
    <div class="menu-item" onclick="showOptions('原腿堡')">原腿堡</div>
    <div class="menu-item" onclick="showOptions('香雞堡')">香雞堡</div>
    <div class="menu-item" onclick="showOptions('日雞堡')">日雞</div>
    <div class="menu-item" onclick="showOptions('日豬堡')">日豬堡</div>
    <div class="menu-item" onclick="showOptions('花枝堡')">花枝堡</div>
    <div class="menu-item" onclick="showOptions('蝦排堡')">蝦排堡</div>
    <div class="menu-item" onclick="showOptions('肉鬆堡')">肉鬆堡</div>
        
        <!-- 在这里添加更多吐司的菜单项 -->
    </div>
    <div class="category" id="蛋餅">
        <div class="menu-item" onclick="showOptions('原味')">原味</div>
    <div class="menu-item" onclick="showOptions('烤肉')">烤肉</div>
    <div class="menu-item" onclick="showOptions('起司')">起司</div>
    <div class="menu-item" onclick="showOptions('火腿')">火腿</div>
    <div class="menu-item" onclick="showOptions('鮪魚')">鮪魚</div>
    <div class="menu-item" onclick="showOptions('培根')">培根</div>
    <div class="menu-item" onclick="showOptions('熱狗')">熱狗</div>
    <div class="menu-item" onclick="showOptions('玉米')">玉米</div>
    <div class="menu-item" onclick="showOptions('萵苣')">萵苣</div>
    <div class="menu-item" onclick="showOptions('洋蔥')">洋蔥</div>
    <div class="menu-item" onclick="showOptions('肉鬆')">肉鬆</div>
        
        <!-- 在这里添加更多吐司的菜单项 -->
    </div>
    <div class="category" id="麵類">
        <div class="menu-item" onclick="showOptions('炒麵')">炒麵</div>
    <div class="menu-item" onclick="showOptions('烤肉炒麵')">烤肉炒麵</div>
    <div class="menu-item" onclick="showOptions('日雞炒麵')">日雞炒麵</div>
    <div class="menu-item" onclick="showOptions('日豬炒麵')">日豬炒麵</div>
    <div class="menu-item" onclick="showOptions('培根炒麵')">培根炒麵</div>
    <div class="menu-item" onclick="showOptions('火腿炒麵')">火腿炒麵</div>
        
        <!-- 在这里添加更多吐司的菜单项 -->
    </div>
    <div class="category" id="捲餅">
        <div class="menu-item" onclick="showOptions('香雞捲')">香雞捲</div>
    <div class="menu-item" onclick="showOptions('烤肉捲')">烤肉捲</div>
    <div class="menu-item" onclick="showOptions('日雞捲')">日雞捲</div>
    <div class="menu-item" onclick="showOptions('花枝捲')">花枝捲</div>
    <div class="menu-item" onclick="showOptions('蝦排捲')">蝦排捲</div>
    <div class="menu-item" onclick="showOptions('原腿捲')">原腿捲</div>
    <div class="menu-item" onclick="showOptions('辣腿捲')">辣腿捲</div>
        
        <!-- 在这里添加更多吐司的菜单项 -->
    </div>
    <div class="category" id="炸物">
        <div class="menu-item" onclick="showOptions('全熟蛋')">全熟蛋</div>
    <div class="menu-item" onclick="showOptions('半熟蛋')">半熟蛋</div>
    <div class="menu-item" onclick="showOptions('熱狗')">熱狗</div>
    <div class="menu-item" onclick="showOptions('薯餅')">薯餅</div>
    <div class="menu-item" onclick="showOptions('蘿蔔糕')">蘿蔔糕</div>
    <div class="menu-item" onclick="showOptions('鐵板麵')">鐵板麵</div>
        
        <!-- 在这里添加更多吐司的菜单项 -->
    </div>
    <div class="category" id="法國吐司">
        <div class="menu-item" onclick="showOptions('果醬法吐')">果醬法吐</div>
    <div class="menu-item" onclick="showOptions('培根法吐')">培根法吐</div>
    <div class="menu-item" onclick="showOptions('鮪魚法吐')">鮪魚法吐</div>
    <div class="menu-item" onclick="showOptions('烤肉法吐')">烤肉法吐</div>
        
        <!-- 在这里添加更多吐司的菜单项 -->
    </div>
    <div class="category" id="日式穀堡">
        <div class="menu-item" onclick="showOptions('菜穀')">菜穀</div>
    <div class="menu-item" onclick="showOptions('雞穀')">雞穀</div>
    <div class="menu-item" onclick="showOptions('豬穀')">豬穀</div>
    <div class="menu-item" onclick="showOptions('咖哩穀')">咖哩穀</div>
    <div class="menu-item" onclick="showOptions('魚排穀')">魚排穀</div>
        
        <!-- 在这里添加更多吐司的菜单项 -->
    </div>
    <div class="category" id="起酥堡">
        <div class="menu-item" onclick="showOptions('果醬法吐')">草莓起酥</div>
    <div class="menu-item" onclick="showOptions('洋芋起酥')">洋芋起酥</div>
    <div class="menu-item" onclick="showOptions('苜蓿芽玉米起酥')">苜蓿芽玉米起酥</div>
    <div class="menu-item" onclick="showOptions('番茄萵苣起酥')">番茄萵苣起酥</div>
    <div class="menu-item" onclick="showOptions('萵苣烤肉起酥')">萵苣烤肉起酥</div>
        
        <!-- 在这里添加更多吐司的菜单项 -->
    </div>

<!-- 在这里添加其他菜单分类的HTML代码 -->

    <!-- 显示选项的模态框 -->
    <div class="modal" id="optionsPopup">
        <h2>選擇選項</h2>
        <button onclick="addToOrder('正常')" style="width: 80px;height: 36;height: 31px;font-size: 20px;">正常</button>
        <button onclick="addToOrder('全')" style="width: 60px;height: 36;height: 31px;font-size: 20px;">全</button>
        <button onclick="addToOrder('特殊')" style="width: 60px;height: 36;height: 31px;font-size: 20px;">特殊</button>
        <button onclick="addToOrder('不醬')" style="width: 60px;height: 36;height: 31px;font-size: 20px;">不醬</button>
        <button onclick="addToOrder('番改千')" style="width: 80px;height: 36;height: 31px;font-size: 20px;">番改千</button>
        <!-- 在这里添加更多选项按钮 -->
        <button onclick="closeOptions()" style="width: 100px;height: 36;height: 31px;font-size: 20px;">關閉視窗</button>
    </div>

    <!-- 右上角的浮动按钮 -->
    <button class="floating-button" onclick="toggleOrderList()" style="font-size: 19px;">待做清單</button>


    <!-- 待做清单模态框 -->
    <div class="modal" id="orderDetailsPopup">
        <h2>待做清單</h2>
        <ul id="orderDetails">
            <!-- 这里将显示最终的订单详情 -->
        </ul>
        <button onclick="closeOrderDetails()">關閉</button>
    </div>
    <div id="messageDiv" style = "padding-bottom: 300px;"></div>

    <script>
        const optionsPopup = document.querySelector('#optionsPopup');
        const orderDetailsPopup = document.querySelector('#orderDetailsPopup');
        const orderList = document.querySelector('#orderDetails');
        let selectedMenuItem = '';

        // 显示选项模态框
        function showOptions(itemName) {
            selectedMenuItem = itemName;
            optionsPopup.style.display = 'block';
        }

        // 添加到待做清单
function addToOrder(itemConditions) {
    if (itemConditions === '请选择选项') {
        alert('请选择选项');
        return;
    }

    const orderItem = document.createElement('li');
    orderItem.innerHTML = `${selectedMenuItem} - ${itemConditions} <button class="complete-button" onclick="complete(this)">完成</button>`;
    orderList.appendChild(orderItem);

    // 清空选项
    optionsPopup.style.display = 'none';

    // 显示成功消息，传递所选的餐品名称
    showMessage(`${selectedMenuItem} 已點餐完成`);
}

function showMessage(message) {
    const messageDiv = document.getElementById('messageDiv');
    messageDiv.textContent = message;

    // 清空消息，你可以设置一个定时器来自动清除消息
    setTimeout(() => {
        messageDiv.textContent = '';
    }, 3000); // 在3秒后清空消息
}

        // 完成订单
        function complete(button) {
            const orderItem = button.parentElement;
            orderList.removeChild(orderItem);
        }

        // 切换待做清单的显示状态
        function toggleOrderList() {
            orderDetailsPopup.style.display = 'block';
        }

        // 关闭待做清单
        function closeOrderDetails() {
            orderDetailsPopup.style.display = 'none';
        }

        // 显示特定分类
        function showCategory(categoryId) {
            const categories = document.querySelectorAll('.category');
            categories.forEach(category => {
                if (category.id === categoryId) {
                    category.style.display = 'flex';
                } else {
                    category.style.display = 'none';
                }
            });
        }
        function closeOptions() {
    const optionsPopup = document.querySelector('#optionsPopup');
    optionsPopup.style.display = 'none';
}
    </script>

</body>
</html>

